@page "/"
@using BlazorMovieDB.Models
@inject MovieDbService MovieDbService

<PageTitle>Home</PageTitle>

<div class="container-xxl py-3">
    <div class="row">
        <div class="col">
            <h1>Popular Movies</h1>
            <div class="d-flex flex-column flex-md-row justify-content-between my-3">
                <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 row-cols-xl-5 g-3 justify-content-center justify-content-md-start">
                    @if (_movies is not null)
                    {
                        @foreach (var movie in _movies)
                        {
                            <div class="col">
                                <CardComponent Movie="movie"/>
                            </div>
                        }
                    }
                    else
                    {
                        @for (int i = 0; i < 10; i++)
                        {
                            <div class="col">
                                <CardComponent />
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
</div>
<hr class="hr hr-blurry"/>
<div class="container">
    <div class="row">
        <div class="col">
            <h1 class="d-flex align-item-center">Popular TV Shows</h1>
            <div class="container">
                <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 d-flex align-items-start g-4 p-3">
                    @if (_tVs is not null)
                    {
                        @foreach (var tv in _tVs)
                        {
                            <div class="col">
                                <div class="card h-100">
                                    <img src="@($"https://image.tmdb.org/t/p/original/{tv.PosterPath}")" class="card-img-top" alt="Movie Poster"/>
                                    <div class="card-body">
                                        <h5 class="card-title">@tv.Name</h5>
                                        <a href="/tv/details/@tv.Id" class="btn btn-primary" data-mdb-ripple-init>Details</a>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
</div>


@code {

    private List<Movie>? _movies = [];
    private List<Tv>? _tVs = [];


    protected override async Task OnInitializedAsync()
    {
        _movies = await MovieDbService.GetMoviesAsync();
        _tVs = await MovieDbService.GetTvAsync();
    }
}

